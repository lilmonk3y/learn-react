{"ast":null,"code":"import React from \"react\";\nimport { localStorageKey } from \"../Storage/useLocalStorage\";\n\nfunction useStorageListener(synchronizeTodos) {\n  const [storageChange, setStorageChange] = React.useState(false);\n  React.useEffect(() => {\n    const eventAction = event => {\n      if (event.key === localStorageKey) {\n        setStorageChange(true);\n      }\n    };\n\n    window.addEventListener('storage', eventAction);\n    return () => window.removeEventListener('storage', eventAction);\n  }, []);\n\n  const toggleAction = () => {\n    synchronizeTodos();\n    setStorageChange(false);\n  };\n\n  return {\n    show: storageChange,\n    toggle: toggleAction\n  };\n}\n\nexport { useStorageListener };","map":{"version":3,"names":["React","localStorageKey","useStorageListener","synchronizeTodos","storageChange","setStorageChange","useState","useEffect","eventAction","event","key","window","addEventListener","removeEventListener","toggleAction","show","toggle"],"sources":["/home/christian/Code/todo-made-in-react/src/StorageChangeAlert/useStorageListener.tsx"],"sourcesContent":["import React from \"react\";\nimport {localStorageKey} from \"../Storage/useLocalStorage\";\n\nfunction useStorageListener(synchronizeTodos : () => void) {\n    const [storageChange, setStorageChange] = React.useState(false);\n\n    React.useEffect( () => {\n        const eventAction = (event : Event) => {\n            if((event as StorageEvent).key === localStorageKey){\n                setStorageChange(true);\n            }\n        };\n\n        window.addEventListener('storage', eventAction);\n        return () => window.removeEventListener('storage', eventAction);\n        }, []);\n\n    const toggleAction = () => {\n        synchronizeTodos();\n        setStorageChange(false)\n    }\n    return {\n        show : storageChange,\n        toggle : toggleAction,\n    };\n}\n\nexport {useStorageListener};"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,eAAR,QAA8B,4BAA9B;;AAEA,SAASC,kBAAT,CAA4BC,gBAA5B,EAA2D;EACvD,MAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCL,KAAK,CAACM,QAAN,CAAe,KAAf,CAA1C;EAEAN,KAAK,CAACO,SAAN,CAAiB,MAAM;IACnB,MAAMC,WAAW,GAAIC,KAAD,IAAmB;MACnC,IAAIA,KAAD,CAAwBC,GAAxB,KAAgCT,eAAnC,EAAmD;QAC/CI,gBAAgB,CAAC,IAAD,CAAhB;MACH;IACJ,CAJD;;IAMAM,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCJ,WAAnC;IACA,OAAO,MAAMG,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCL,WAAtC,CAAb;EACC,CATL,EASO,EATP;;EAWA,MAAMM,YAAY,GAAG,MAAM;IACvBX,gBAAgB;IAChBE,gBAAgB,CAAC,KAAD,CAAhB;EACH,CAHD;;EAIA,OAAO;IACHU,IAAI,EAAGX,aADJ;IAEHY,MAAM,EAAGF;EAFN,CAAP;AAIH;;AAED,SAAQZ,kBAAR"},"metadata":{},"sourceType":"module"}