{"ast":null,"code":"import _slicedToArray from\"/home/christian/Code/todo-made-in-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{localStorageKey}from\"../Storage/useLocalStorage\";function useStorageListener(synchronizeTodos){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),storageChange=_React$useState2[0],setStorageChange=_React$useState2[1];React.useEffect(function(){var eventAction=function eventAction(event){if(event.key===localStorageKey){setStorageChange(true);}};window.addEventListener('storage',eventAction);return function(){return window.removeEventListener('storage',eventAction);};},[]);var toggleAction=function toggleAction(){synchronizeTodos();setStorageChange(false);};return{show:storageChange,toggle:toggleAction};}export{useStorageListener};","map":{"version":3,"names":["React","localStorageKey","useStorageListener","synchronizeTodos","useState","storageChange","setStorageChange","useEffect","eventAction","event","key","window","addEventListener","removeEventListener","toggleAction","show","toggle"],"sources":["/home/christian/Code/todo-made-in-react/src/StorageChangeAlert/useStorageListener.tsx"],"sourcesContent":["import React from \"react\";\nimport {localStorageKey} from \"../Storage/useLocalStorage\";\n\nfunction useStorageListener(synchronizeTodos : () => void) {\n    const [storageChange, setStorageChange] = React.useState(false);\n\n    React.useEffect( () => {\n        const eventAction = (event : Event) => {\n            if((event as StorageEvent).key === localStorageKey){\n                setStorageChange(true);\n            }\n        };\n\n        window.addEventListener('storage', eventAction);\n        return () => window.removeEventListener('storage', eventAction);\n        }, []);\n\n    const toggleAction = () => {\n        synchronizeTodos();\n        setStorageChange(false)\n    }\n    return {\n        show : storageChange,\n        toggle : toggleAction,\n    };\n}\n\nexport {useStorageListener};"],"mappings":"6HAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAAQC,eAAR,KAA8B,4BAA9B,CAEA,QAASC,mBAAT,CAA4BC,gBAA5B,CAA2D,CACvD,oBAA0CH,KAAK,CAACI,QAAN,CAAe,KAAf,CAA1C,oDAAOC,aAAP,qBAAsBC,gBAAtB,qBAEAN,KAAK,CAACO,SAAN,CAAiB,UAAM,CACnB,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACC,KAAD,CAAmB,CACnC,GAAIA,KAAD,CAAwBC,GAAxB,GAAgCT,eAAnC,CAAmD,CAC/CK,gBAAgB,CAAC,IAAD,CAAhB,CACH,CACJ,CAJD,CAMAK,MAAM,CAACC,gBAAP,CAAwB,SAAxB,CAAmCJ,WAAnC,EACA,MAAO,kBAAMG,OAAM,CAACE,mBAAP,CAA2B,SAA3B,CAAsCL,WAAtC,CAAN,EAAP,CACC,CATL,CASO,EATP,EAWA,GAAMM,aAAY,CAAG,QAAfA,aAAe,EAAM,CACvBX,gBAAgB,GAChBG,gBAAgB,CAAC,KAAD,CAAhB,CACH,CAHD,CAIA,MAAO,CACHS,IAAI,CAAGV,aADJ,CAEHW,MAAM,CAAGF,YAFN,CAAP,CAIH,CAED,OAAQZ,kBAAR"},"metadata":{},"sourceType":"module"}